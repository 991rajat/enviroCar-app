/**
 * Copyright (C) 2013 - 2019 the enviroCar community
 * <p>
 * This file is part of the enviroCar app.
 * <p>
 * The enviroCar app is free software: you can redistribute it and/or
 * modify it under the terms of the GNU General Public License as published
 * by the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 * <p>
 * The enviroCar app is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General
 * Public License for more details.
 * <p>
 * You should have received a copy of the GNU General Public License along
 * with the enviroCar app. If not, see http://www.gnu.org/licenses/.
 */
package org.envirocar.core.entity;

import java.util.Objects;

/**
 * TODO JavaDoc
 *
 * @author dewall
 */
public class CarImpl implements Car {
    private static final long serialVersionUID = 2533968678052900431L;

    protected String id;
    protected String model;
    protected String manufacturer;
    protected FuelType fuelType;
    protected int constructionYear;
    protected int engineDisplacement;

    @Deprecated
    public static double ccmToLiter(int ccm) {
        float result = ccm / 1000.0f;
        return result;
    }

    /**
     * Constructor.
     */
    public CarImpl() {
    }

    /**
     * Constructor.
     *
     * @param manufacturer       the manufacturer
     * @param model              the model
     * @param fuelType           the fueltype
     * @param constructionYear   the year of construction
     */
    public CarImpl(String manufacturer, String model, FuelType fuelType, int constructionYear) {
        this(manufacturer, model, fuelType, constructionYear, -1);
    }

    /**
     * Constructor.
     *
     * @param manufacturer       the manufacturer
     * @param model              the model
     * @param fuelType           the fueltype as String
     * @param constructionYear   the year of construction
     * @param engineDisplacement the engine displacement
     */
    public CarImpl(String manufacturer, String model, String fuelType, int constructionYear, int
            engineDisplacement) {
        this(manufacturer, model, FuelType.resolveFuelType(fuelType), constructionYear,
                engineDisplacement);
    }

    /**
     * Constructor.
     *
     * @param manufacturer       the manufacturer
     * @param model              the model
     * @param fuelType           the fueltype
     * @param constructionYear   the year of construction
     * @param engineDisplacement the engine displacement
     */
    public CarImpl(String manufacturer, String model, FuelType fuelType, int constructionYear, int
            engineDisplacement) {
        this(null, manufacturer, model, fuelType, constructionYear, engineDisplacement);
    }

    /**
     * Constructor.
     *
     * @param id                 the identifier
     * @param manufacturer       the manufacturer
     * @param model              the model
     * @param fuelType           the fueltype
     * @param constructionYear   the year of construction
     * @param engineDisplacement the engine displacement
     */
    public CarImpl(String id, String manufacturer, String model, FuelType fuelType, int
            constructionYear, int engineDisplacement) {
        this.id = id;
        this.manufacturer = manufacturer;
        this.model = model;
        this.fuelType = fuelType;
        this.constructionYear = constructionYear;
        this.engineDisplacement = engineDisplacement;
    }

    @Override
    public String getId() {
        return id;
    }

    @Override
    public void setId(String id) {
        this.id = id;
    }

    @Override
    public String getModel() {
        return model;
    }

    @Override
    public void setModel(String model) {
        this.model = model;
    }

    @Override
    public String getManufacturer() {
        return manufacturer;
    }

    @Override
    public void setManufacturer(String manufacturer) {
        this.manufacturer = manufacturer;
    }

    @Override
    public FuelType getFuelType() {
        return fuelType;
    }

    @Override
    public void setFuelType(FuelType fuelType) {
        this.fuelType = fuelType;
    }

    @Override
    public void setFuelType(String fuelType) {
        this.fuelType = FuelType.resolveFuelType(fuelType);
    }

    @Override
    public int getConstructionYear() {
        return constructionYear;
    }

    @Override
    public void setConstructionYear(int constructionYear) {
        this.constructionYear = constructionYear;
    }

    @Override
    public boolean hasEngineDispalcement() {
        return this.fuelType != FuelType.ELECTRIC && engineDisplacement != -1;
    }

    @Override
    public int getEngineDisplacement() {
        return engineDisplacement;
    }

    @Override
    public void setEngineDisplacement(int engineDisplacement) {
        this.engineDisplacement = engineDisplacement;
    }

    @Override
    public String toString() {
        StringBuilder sb = new StringBuilder();
        sb.append(manufacturer);
        sb.append(" ");
        sb.append(model);
        sb.append(" ");
        sb.append(constructionYear);
        sb.append(" (");
        sb.append(fuelType);
        sb.append(" / ");
        sb.append(engineDisplacement);
        sb.append("cc)");
        return sb.toString();
    }

    @Override
    public boolean equals(Object o) {
        boolean result = false;
        if (o instanceof CarImpl) {
            CarImpl c = (CarImpl) o;
            result = this.fuelType == c.fuelType
                    && this.manufacturer.equals(c.manufacturer)
                    && this.model.equals(c.model)
                    //                    && this.id.equals(c.id)
                    && this.constructionYear == c.constructionYear
                    && this.engineDisplacement == c.engineDisplacement;
        }
        return result;
    }

    @Override
    public int hashCode() {
        return Objects.hash(id, model, manufacturer, fuelType, constructionYear, engineDisplacement);
    }

    @Override
    public Car carbonCopy() {
        CarImpl res = new CarImpl();
        res.id = id;
        res.model = model;
        res.manufacturer = manufacturer;
        res.fuelType = fuelType;
        res.constructionYear = constructionYear;
        res.engineDisplacement = engineDisplacement;
        return res;
    }
}
